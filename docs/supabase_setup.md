# Supabase Setup Guide

Follow these steps to set up your backend for the Feedback Portal.

## 1. Create a Supabase Project
1.  Go to [supabase.com](https://supabase.com) and sign in.
2.  Click **"New Project"**.
3.  Select your organization (or create one).
4.  Enter a **Name** (e.g., "Feedback Portal").
5.  Set a **Database Password** (save this securely).
6.  Choose a **Region** close to your users (e.g., Mumbai, Singapore).
7.  Click **"Create new project"**.

## 2. Create the Database Table
1.  Once the project is created, go to the **SQL Editor** (icon on the left sidebar).
2.  Click **"New Query"**.
3.  Paste the following SQL code:

```sql
-- Create the feedback table
CREATE TABLE feedback (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    timestamp TEXT,
    email TEXT,
    name TEXT,
    roll_no TEXT,
    branch TEXT,
    rating FLOAT,
    feedback TEXT,
    suggestions TEXT,
    img_url TEXT
);

-- Enable Row Level Security (RLS)
ALTER TABLE feedback ENABLE ROW LEVEL SECURITY;

-- Create a policy to allow read access to everyone
CREATE POLICY "Public Read Access" 
ON feedback FOR SELECT 
USING (true);

-- Create a policy to allow authenticated users (service role) to insert/update
CREATE POLICY "Service Role Full Access" 
ON feedback FOR ALL 
TO service_role 
USING (true) 
WITH CHECK (true);
```

4.  Click **"Run"**.

## 3. Create the Storage Bucket
1.  Go to **Storage** (icon on the left sidebar).
2.  Click **"New Bucket"**.
3.  Name the bucket: `student-images`.
4.  **IMPORTANT:** Toggle **"Public bucket"** to ON.
5.  Click **"Save"**.

## 4. Get Your API Keys
1.  Go to **Project Settings** (gear icon at the bottom left).
2.  Click **"API"**.
3.  Copy the following values:
    *   **Project URL**
    *   **service_role secret** (Use this for the migration script)
    *   **anon public** (Use this for the frontend website)

## 5. Install Python Dependency
Open your terminal and run:
```bash
pip install supabase
```
